# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: mlflow/mlflow_artifacts.proto
# plugin: python-betterproto
from dataclasses import dataclass
from typing import Dict, List

import betterproto
import grpclib
from betterproto.grpc.grpclib_server import ServiceBase


@dataclass(eq=False, repr=False)
class DownloadArtifact(betterproto.Message):
    pass


@dataclass(eq=False, repr=False)
class DownloadArtifactResponse(betterproto.Message):
    pass


@dataclass(eq=False, repr=False)
class UploadArtifact(betterproto.Message):
    pass


@dataclass(eq=False, repr=False)
class UploadArtifactResponse(betterproto.Message):
    pass


@dataclass(eq=False, repr=False)
class ListArtifacts(betterproto.Message):
    # Filter artifacts matching this path (a relative path from the root artifact
    # directory).
    path: str = betterproto.string_field(1)


@dataclass(eq=False, repr=False)
class ListArtifactsResponse(betterproto.Message):
    # File location and metadata for artifacts.
    files: List["FileInfo"] = betterproto.message_field(1)


@dataclass(eq=False, repr=False)
class FileInfo(betterproto.Message):
    # Path relative to the root artifact directory run.
    path: str = betterproto.string_field(1)
    # Whether the path is a directory.
    is_dir: bool = betterproto.bool_field(2)
    # Size in bytes. Unset for directories.
    file_size: int = betterproto.int64_field(3)


class MlflowArtifactsServiceStub(betterproto.ServiceStub):
    async def download_artifact(self) -> "DownloadArtifactResponse":

        request = DownloadArtifact()

        return await self._unary_unary(
            "/mlflow.artifacts.MlflowArtifactsService/downloadArtifact",
            request,
            DownloadArtifactResponse,
        )

    async def upload_artifact(self) -> "UploadArtifactResponse":

        request = UploadArtifact()

        return await self._unary_unary(
            "/mlflow.artifacts.MlflowArtifactsService/uploadArtifact",
            request,
            UploadArtifactResponse,
        )

    async def list_artifacts(self, *, path: str = "") -> "ListArtifactsResponse":

        request = ListArtifacts()
        request.path = path

        return await self._unary_unary(
            "/mlflow.artifacts.MlflowArtifactsService/listArtifacts",
            request,
            ListArtifactsResponse,
        )


class MlflowArtifactsServiceBase(ServiceBase):
    async def download_artifact(self) -> "DownloadArtifactResponse":
        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def upload_artifact(self) -> "UploadArtifactResponse":
        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def list_artifacts(self, path: str) -> "ListArtifactsResponse":
        raise grpclib.GRPCError(grpclib.const.Status.UNIMPLEMENTED)

    async def __rpc_download_artifact(self, stream: grpclib.server.Stream) -> None:
        request = await stream.recv_message()

        request_kwargs = {}

        response = await self.download_artifact(**request_kwargs)
        await stream.send_message(response)

    async def __rpc_upload_artifact(self, stream: grpclib.server.Stream) -> None:
        request = await stream.recv_message()

        request_kwargs = {}

        response = await self.upload_artifact(**request_kwargs)
        await stream.send_message(response)

    async def __rpc_list_artifacts(self, stream: grpclib.server.Stream) -> None:
        request = await stream.recv_message()

        request_kwargs = {
            "path": request.path,
        }

        response = await self.list_artifacts(**request_kwargs)
        await stream.send_message(response)

    def __mapping__(self) -> Dict[str, grpclib.const.Handler]:
        return {
            "/mlflow.artifacts.MlflowArtifactsService/downloadArtifact": grpclib.const.Handler(
                self.__rpc_download_artifact,
                grpclib.const.Cardinality.UNARY_UNARY,
                DownloadArtifact,
                DownloadArtifactResponse,
            ),
            "/mlflow.artifacts.MlflowArtifactsService/uploadArtifact": grpclib.const.Handler(
                self.__rpc_upload_artifact,
                grpclib.const.Cardinality.UNARY_UNARY,
                UploadArtifact,
                UploadArtifactResponse,
            ),
            "/mlflow.artifacts.MlflowArtifactsService/listArtifacts": grpclib.const.Handler(
                self.__rpc_list_artifacts,
                grpclib.const.Cardinality.UNARY_UNARY,
                ListArtifacts,
                ListArtifactsResponse,
            ),
        }
